@import _tools

%overlap
  content: ' '
  position: absolute
  z-index: $z--mid
  left: 0
  display: block
  width: 100%
  border-color: transparent

=olcolor($color)
  background-color: transparentize($color, 0.5)
  border-color: transparentize($color, 0.5)

section
  position: relative
  z-index: $z--base

._skew
  position: absolute
  z-index: $z--under
  left: 0
  overflow: hidden
  box-sizing: content-box
  width: 100%
  height: 100%
  transform: skewY($angle--ban) scaleZ(1)

  > ._skewcorrect
    position: absolute
    left: 0
    width: 100%
    height: 100%
    transform: skewY($angle--ban / -1)

  &.-oltop,
  &.-olbottom
    &::after
      @extend %overlap

  &.-oltop
    &::after
      top: 0

    &.-oldouble
      &::after
        border-top-width: $overlap-size
        border-top-style: solid

  &.-olbottom
    &::after
      bottom: 0

    &.-oldouble
      &::after
        border-bottom-width: $overlap-size
        border-top-style: solid

  &.-olsmall
    &::after
      height: $overlap-size / 2

  &.-olsingle
    &::after
      height: $overlap-size

  &.-oldouble
    &::after
      height: $overlap-size * 2

  &.-olblue
    &::after
      +olcolor($co--blue--md)

  &.-olbluedk
    &::after
      +olcolor($co--blue--dk)

  &.-olwhite
    &::after
      +olcolor($co--wt)

  &.-olgreen
    &::after
      +olcolor($co--green)

.-skewbottom
  > ._skew
    top: $angle_h_ratio / -2
    padding-bottom: $angle_h_ratio / 2

    > ._skewcorrect
      top: $angle_h_ratio / 2

.-skewtop
  > ._skew
    top: 0
    padding-top: $angle_h_ratio / 2

    > ._skewcorrect
      top: $angle_h_ratio / -2

.-skewboth
  > ._skew
    top: 0

    > ._skewcorrect
      top: $angle_h_ratio / -2
      height: calc(100% + #{$angle_h_ratio})

.-skewnone + .-skewtop,
.-skewnone + .-skewboth
  margin-top: calc(#{$angle_h_ratio / -2} - 1px)
